name: PyLint

on:
push:
pull_request:

jobs:
PEP8:
runs-on: ubuntu-latest
strategy:
matrix:
python-version: [3.7, 3.8, 3.9, 3.10]steps:
  - name: Checkout code
    uses: actions/checkout@v2

  - name: Set up Python ${{ matrix.python-version }}
    uses: actions/setup-python@v2
    with:
      python-version: ${{ matrix.python-version }}

  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip
      pip install autopep8 flake8 isort black

  - name: Check for showstoppers
    run: |
      autopep8 --verbose --in-place --recursive --aggressive --ignore=W605 .

  - name: Remove unused imports and variables
    run: |
      autoflake --in-place --recursive --remove-unused-variables .

  - name: Lint with isort, black and flake8
    run: |
      isort .
      black .
      flake8 --max-line-length=120 --ignore=E203,W503 .

  - name: Commit changes
    uses: stefanzweifel/git-auto-commit-action@v4
    with:
      commit_message: "Auto fix PEP8 issues"
      commit_options: "--no-verify"
      commit_user_name: "XtomiX"
      commit_user_email: "96681219+XtomiX@users.noreply.github.com"
      commit_author: "XtomiX <96681219+XtomiX@users.noreply.github.com>" 
